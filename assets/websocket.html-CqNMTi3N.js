import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o as l,c as a,d as e,b as t,a as n,e as s}from"./app-FAJdgnyw.js";const i={},d=e("h1",{id:"websocket",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#websocket"},[e("span",null,"Websocket")])],-1),h=e("p",null,[t("突然想学这个包是因为我院测试技术与信号处理课程作业，老师给出的题目是：“调用手机中的传感器，显示参数的动态变化”，经过一番搜索我发现了 python 中"),e("code",null,"websocket"),t("这个包，可以实现实时的手机传感器数据传输。")],-1),p=e("h2",{id:"sensor-server",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#sensor-server"},[e("span",null,"Sensor Server")])],-1),u={href:"https://github.com/umer0586/SensorServer",target:"_blank",rel:"noopener noreferrer"},_=s(`<p>Github 提供了一个开源的 Android apk，名为：“Sensor Server”，可以用来提供移动端传感器接口，利用<code>ws</code>互联网协议传输数据。移动端启动后，会提供一个 url，我们需要保证 PC 和移动端均连接到该 url 上。</p><p><code>websocket</code>和<code>HTTPS</code>提供了类似的套接字定义，以下服务器 url，即是<code>Sensor Server</code>提供的服务器地址。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>ws://&lt;ip&gt;:&lt;port&gt;/sensor/connect?type=&lt;type dir&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),b=e("code",null,"type",-1),m=e("code",null,"Sensor Server",-1),g=e("code",null,"type",-1),k=e("code",null,"accelerometer-bma422",-1),v=e("code",null,"type",-1),w=e("code",null,"android.sensor.accelerometer",-1),S={href:"https://livepersoninc.github.io/ws-test-page/",target:"_blank",rel:"noopener noreferrer"},f=e("code",null,"url",-1),y=e("code",null,"ws",-1),x=e("code",null,"connect",-1),T=e("code",null,"json",-1),P=e("code",null,"values",-1),C=e("code",null,"values",-1),W={href:"https://developer.android.com/develop/sensors-and-location/sensors/sensors_motion?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"},G={class:"hint-container details"},A=e("summary",null,"报错解决：an inscure WebSocket connection may not be initiated from a page loaded over HTTPS",-1),N=e("p",null,[t("我在 edge 浏览器打开测试网页后，输入正确的 "),e("code",null,"url"),t(" 后，连接不成功，但是我在移动端的火狐浏览器上是可以成功连接的，此时 PC 端报错为：")],-1),Z=e("div",{class:"language-text line-numbers-mode","data-ext":"text","data-title":"text"},[e("pre",{class:"language-text"},[e("code",null,`Failed to construct 'WebSocket': An insecure WebSocket connection may not be initiated from a page loaded over HTTPS
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),z={href:"https://stackoverflow.com/questions/28625351/uncaught-securityerror-failed-to-construct-websocket-an-insecure-websocket-c",target:"_blank",rel:"noopener noreferrer"},H=e("code",null,"url",-1),D=e("code",null,"wss://",-1),V=e("code",null,"connecting",-1),q=e("code",null,"url",-1),B=e("p",null,"后续：",-1),E=e("p",null,"第二天测试后，即使是在 Chrome 打开测试网站，依然无法 connect。",-1),O=e("p",null,[e("s",null,"省流：edge 不如 Chrome。")],-1),j=e("h2",{id:"websocket-1",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#websocket-1"},[e("span",null,"websocket")])],-1),I={href:"https://websocket-client.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer"},L=e("h3",{id:"usage",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#usage"},[e("span",null,"Usage")])],-1),U={href:"https://github.com/websocket-client/websocket-client",target:"_blank",rel:"noopener noreferrer"},Y=s(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>poetry <span class="token function">add</span> websocket-client
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),F=e("code",null,"import websocket",-1),J={href:"https://cloud.tencent.com/developer/article/1640430",target:"_blank",rel:"noopener noreferrer"},M=e("ul",null,[e("li",null,[t("长连接："),e("code",null,"websocket.WebSocketApp()"),t("对象")]),e("li",null,[t("短连接："),e("code",null,"websocket.WebSocket()"),t("对象")])],-1),R=e("s",null,"（设成相同的使用方式不好吗！）",-1),K={href:"https://websocket-client.readthedocs.io/en/latest/examples.html",target:"_blank",rel:"noopener noreferrer"};function Q(X,$){const o=c("ExternalLinkIcon");return l(),a("div",null,[d,h,p,e("p",null,[e("a",u,[t("Sensor Server 的 Github 仓库链接"),n(o)])]),_,e("p",null,[t("链接中的参数"),b,t("即表示传感器接口，"),m,t("中提供了一系列传感器接口的"),g,t("，如对于"),k,t("传感器，其"),v,t("为"),w,t("。"),e("a",S,[t("该网址"),n(o)]),t("提供了一个 web 端接口，用来测试传感器数据传输是否正常，打开网页后在"),f,t("栏中输入上述"),y,t("地址，点击"),x,t("后，即可连接至移动端，并且实时读取传感器数据。")]),e("p",null,[t("PC 端与服务器建立的链接为长链接，会不断从服务器读取传感器的参数值，并且返回一个"),T,t("文件，其中的"),P,t("便是传感器的测量值，各个传感器端口的"),C,t("含义，可以在"),e("a",W,[t("该链接"),n(o)]),t("中查找。")]),e("details",G,[A,N,Z,e("p",null,[t("我去 Google 直接查了报错，查到了"),e("a",z,[t("这篇文章"),n(o)]),t("，然后我跟着这篇文章将"),H,t("地址改为"),D,t("后，edge 一直显示"),V,t("，但是始终连接不上移动端，结合这篇文章的思路，我怀疑是浏览器拦截了传输，于是在 Chrome 中打开测试网站，将原来的"),q,t("填入，关闭网络代理后，PC 端与移动端连接成功。")]),B,E,O]),j,e("p",null,[e("a",I,[t("Documents"),n(o)])]),L,e("p",null,[e("a",U,[t("websocket-client"),n(o)]),t(" 为 python 的第三方库，需要安装，用 poetry 做包管理器：")]),Y,e("p",null,[t("要使用 websocket-client，仅需要在 python 中"),F,t("即可。websocket 本质上是一个提供 PC 端与服务器连接的包，提供了两种连接方式，长连接和短连接，两种连接方式的差别可以见"),e("a",J,[t("这篇文档"),n(o)]),t("。")]),M,e("p",null,[t("两种对象的参数和使用方法不太相同 "),R,t(" ，具体可见"),e("a",K,[t("文档"),n(o)])])])}const oe=r(i,[["render",Q],["__file","websocket.html.vue"]]),ne=JSON.parse('{"path":"/code/python/websocket.html","title":"Websocket","lang":"zh-CN","frontmatter":{"date":"2024-02-27T00:00:00.000Z","icon":"bianzubeifen8","category":"Python 库","tag":"教程","description":"Websocket 突然想学这个包是因为我院测试技术与信号处理课程作业，老师给出的题目是：“调用手机中的传感器，显示参数的动态变化”，经过一番搜索我发现了 python 中websocket这个包，可以实现实时的手机传感器数据传输。 Sensor Server Sensor Server 的 Github 仓库链接 Github 提供了一个开源的 An...","head":[["meta",{"property":"og:url","content":"https://dream-oyh.github.io/code/python/websocket.html"}],["meta",{"property":"og:site_name","content":"Dream_oyh 的 blog"}],["meta",{"property":"og:title","content":"Websocket"}],["meta",{"property":"og:description","content":"Websocket 突然想学这个包是因为我院测试技术与信号处理课程作业，老师给出的题目是：“调用手机中的传感器，显示参数的动态变化”，经过一番搜索我发现了 python 中websocket这个包，可以实现实时的手机传感器数据传输。 Sensor Server Sensor Server 的 Github 仓库链接 Github 提供了一个开源的 An..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-29T06:40:14.000Z"}],["meta",{"property":"article:author","content":"OYH"}],["meta",{"property":"article:tag","content":"教程"}],["meta",{"property":"article:published_time","content":"2024-02-27T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-29T06:40:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Websocket\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-02-27T00:00:00.000Z\\",\\"dateModified\\":\\"2024-02-29T06:40:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"OYH\\",\\"email\\":\\"19859860010@163.com\\"}]}"]]},"headers":[{"level":2,"title":"Sensor Server","slug":"sensor-server","link":"#sensor-server","children":[]},{"level":2,"title":"websocket","slug":"websocket-1","link":"#websocket-1","children":[{"level":3,"title":"Usage","slug":"usage","link":"#usage","children":[]}]}],"git":{"createdTime":1709049042000,"updatedTime":1709188814000,"contributors":[{"name":"dream同学0","email":"1399541701@qq.com","commits":2}]},"readingTime":{"minutes":2.68,"words":803},"filePathRelative":"code/python/websocket.md","localizedDate":"2024年2月27日","excerpt":"\\n<p>突然想学这个包是因为我院测试技术与信号处理课程作业，老师给出的题目是：“调用手机中的传感器，显示参数的动态变化”，经过一番搜索我发现了 python 中<code>websocket</code>这个包，可以实现实时的手机传感器数据传输。</p>\\n<h2>Sensor Server</h2>\\n<p><a href=\\"https://github.com/umer0586/SensorServer\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Sensor Server 的 Github 仓库链接</a></p>\\n<p>Github 提供了一个开源的 Android apk，名为：“Sensor Server”，可以用来提供移动端传感器接口，利用<code>ws</code>互联网协议传输数据。移动端启动后，会提供一个 url，我们需要保证 PC 和移动端均连接到该 url 上。</p>","autoDesc":true}');export{oe as comp,ne as data};
